<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>8. 랜덤 점심</title>
    <style>
        button:first-of-type {
            display: none;
        }
    </style>
    <script src="민초의난.json"></script>
    <script>
        // window : document보다 더 상위 계층
        // 우리가 보는 창(웹브라우저) 의미 함
        // window.onload = function() {}의 의미
        // body태그에 있는 걸 다 불러들인 다음에 실행하겠다
        window.onload = function()
        {
            let btn = document.querySelector('button')
            let mylunch = document.querySelector('img')
            let result = document.querySelector('#result')
            
            
            // let lunches_image = ['https://t1.daumcdn.net/cfile/tistory/215F0F3B590299982C',
            // 'https://img.hankyung.com/photo/201908/01.20330262.1.jpg',
            // 'https://t1.daumcdn.net/cfile/tistory/9963C6405A583F0719']


            
            let 국수 = {
                이름 : '국수',
                사진 : 'https://t1.daumcdn.net/cfile/tistory/215F0F3B590299982C'
            }
            let 햄버거 = {
                이름 : '햄버거',
                사진 : 'https://img.hankyung.com/photo/201908/01.20330262.1.jpg'
            }
            let 샌드위치 = {
                이름 : '샌드위치',
                사진 : 'https://t1.daumcdn.net/cfile/tistory/9963C6405A583F0719'
            }

            
            let lunch = [국수, 햄버거, 샌드위치]
            lunch[3] = {
                이름 : '피자',
                사진 : 'https://glebekitchen.com/wp-content/uploads/2018/09/pizzamargheritatop.jpg'
            }
            lunch[4] = 민초
            

            btn.textContent = '점심선택'
            mylunch.width = 0
            mylunch.height = 0
            mylunch.src = ''

            mylunch.style.display = 'block'
            

            let previous = -1

            btn.onclick = () => {
                mylunch.width = 300
                mylunch.height = 300
                mylunch.src = ''
                result.textContent = ''
                //배열의 길이가 3일 때, 소수점 이하 버리기 때문에 0,1,2 나옴 
                let idx = Math.floor(Math.random()*lunch.length)
                while(idx==previous) 
                {
                    idx = Math.floor(Math.random()*lunch.length)
                }
                previous = idx
                
                
                
                mylunch.src = lunch[idx].사진
                            //lunches_image[idx]
                
                //속성 불러올 때 배열 연산자 써도 됨 @@@
                result.textContent = lunch[idx]['이름']
                                    //lunches_name[idx]
            }



            //추후에 타이머 멈출 때
            //타이머를 변수에 담아둬야 함
            //그래야 멈출 수 있다.

            //타이머를 변수에 담아둬야 나중에 멈출 수 있음
            let timerid

            document.querySelector('#start').onclick =
            () => {
                clearInterval(timerid)  //기존 타이머 멈추기
                timerid = 
                setInterval(
                    ()=> {btn.click()}, 130
                );
            }

            document.querySelector('#stop').onclick =
            () => {
                clearInterval(timerid)
            }



        }
    </script>
</head>
<body>
    <h1>오늘의 점심은?</h1>
    <button></button>
    <button id="start">시작</button>
    <button id="stop">정지</button>
    <img src="" alt="">
    <h1 id="result"></h1>
    
</body>
</html>